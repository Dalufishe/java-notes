# Java 數據結構 (資料結構)

數據結構是程序存儲數據，組織數據的方式。
通俗來說是指數據相互之間是以什麼樣的方式排列在一起的。
不同的業務場景通常會選擇不同的數據結構，精心選擇的數據結構能有效提高代碼的運行效率，節省記憶體，甚至更方便代碼管理。

### 棧 (堆疊) (Stack)

核心概念: 先進後出，後進先出。

### 佇列 (隊列) (Queue)

核心概念: 先進先出，後進後出。

### 陣列 (Array)

核心概念: 透過記憶體位置及索引訪問數據。數據之間在內存中是連續的。

特點:

- 查詢速度快 (索引定位)
- 刪除/添加效率低 (需前移/後移元素)

#### Array & ArrayList

Array 和 ArrayList 為 陣列(資料結構) 在 Java 的資料型態實現。
ArrayList 也作為 List 系列的資料型態，底層使用 陣列 資料結構。

Array 的長度是不可變的，ArrayList 坐落在集合體系下，其長度是可變的。

他們的底層均符合 Array 資料結構的定義。(元素在記憶體中是連續的，透過記憶體位置和索引訪問值)



### 鍊表 (Linked List)

核心概念: 透過記憶體位置訪問數據，數據間透過記憶體位置連接，前一個節點記錄著後一個節點的地址值。數據之間在內存中是不連續的。

- 查詢速度慢 (從頭/尾找)
- 刪除/添加效率高 (僅需修改節點存儲的記憶體)
- 操作頭/尾元素效率極高

#### LinkedList

LinkedList 是 List 系列的資料型態，底層使用 鍊表 (雙向) 資料結構。

他的底層使用雙向鍊表，透過節點 (Node) 上的記憶體地址相互連接。

### 二元樹 & 二元搜尋樹 

二元樹: 每個節點最多有兩個子節點。

二元搜尋樹: 二在符合二元樹的前提下，左子節點的值永遠小於自身，右子節點的值永遠大於自身。

#### 二元樹的遍歷方式

前序遍歷: 從根節點開始，按照當前節點，左子節點，右子節點的順序遍歷。
中序遍歷: 從根節點開始，按照左子節點，當前節點，右子節點的順序遍歷。
後序遍歷: 從根節點開始，按照左子節點，右子節點，當前節點的順序遍歷。
層序遍歷: 從根節點開始，由上層到下層一一進行遍歷。

### 平衡二元樹

平衡二元樹: 二元搜尋樹，任意節點左右子樹高度差不超過一。

#### 左旋 vs 右旋

從樹中找到一個的支點，再進行旋轉，往左稱左旋，往右稱右旋。

#### 添加元素流程

1. 添加元素
2. 判斷當下是否是否平衡
   1. 是: 則保持不變
   2. 否: 則執行 3.
3. 判斷當前情況，考慮左旋還是右旋
   1. 左左: 整體右旋
   2. 左右: 局部左旋 + 整體右旋
   3. 右右: 整體左旋
   4. 右左: 局部右旋 + 整體左旋


### 紅黑樹

紅黑樹: 二元查找樹，類似平衡二元樹，但並非高度平衡，而是按特有的紅黑規則平衡。

#### 紅黑規則

1. 每個節點都是紅色，或是黑色的。
2. 根節點必須是黑色。
3. 若一節點沒有子節點或父節點，其對應子節點或父節點位置稱作 Nil 節點，或叫葉節點，每個葉節點是黑色的。
4. 若某個節點是紅色，其子節點必須是黑色。(不能出現兩個紅色相連的情況)
5. 對每一個節點，從該節點到所有後代葉節點的簡單路徑上，均包含相同數目的黑色節點。

#### HashSet

HashSet 是 Set 系列 (無序，無索引，不可重複) 的資料型態，底層使用哈希表 (雜湊表) ，其為陣列 + 鍊表 + 紅黑樹實作。其特點為曾刪改查性能都優秀。

哈希表是透過哈希值 (HashCode) 控制數據的存儲位置。哈希值，為一物件所對應到的一整數 (int) 的名稱。HashSet 默認使用 Object.hashCode() 獲取元素哈希值，可透過重寫元素資料型態的 hashCode() 方法修改哈希值規則。

哈希表存儲是不可重複的，HashSet 會調用元素的 equals() 方法來比較相同哈希值的元素是否相同。你必須重寫 equals() 方法保證比較的是元素內容而非地址值。

jdk8 前 HashSet 的 哈希表實作: 陣列 + 鏈表
jdk8 後 HashSet 的 哈希表實作: 陣列 + 鏈表 + 紅黑樹

為甚麼 Java 使用哈希表來實作 Set ?

Set 系列資料型態設計來解決的問題為"數據不重複"，使用哈希表可很輕易的實作出內容不重複的資料型態。

#### LinkedHashSet

LinkedHashSet 是 Set 系列 的資料型態中的特例，其是有序，無索引，不可重複的。底層除了使用哈希表 (雜湊表)，還使用了雙向鏈表紀錄存入順序。

相比 HashSet 效能較低，但內容是有序的。

